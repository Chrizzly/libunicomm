<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>XML format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('xml_format_page.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">XML format </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This section describes the XML format used by unicomm to transfer messages.</p>
<p>There are four basic (built-in) types: int (int), uint (unsigned int), string (std::string), double (double), complex (smart::data::complex). In the brackets C++ types are specified. The object of necessary type is declared via XML tag having similar name.</p>
<p>The root tag is <em>&lt;message&gt;</em>. The <em>&lt;message&gt;</em> tag is similar to <em>&lt;complex&gt;</em> tag. There is no nested <em>&lt;message&gt;</em> tag allowed. The <em>&lt;complex&gt;</em> tag may contain nested <em>&lt;int&gt;</em>, <em>&lt;uint&gt;</em>, <em>&lt;string&gt;</em>, <em>&lt;double&gt;</em> and <em>&lt;complex&gt;</em> itself. Each object (tag) must have <em>name</em> attribute. The name string can be empty but attribute anyway should present. It's possible to declare one-dimensional array of each type including <em>&lt;complex&gt;</em>. The array is declared using <em>&lt;items&gt;</em> tag, it can only appear inside type tags. For instance, following will create strings array with four elements.</p>
<pre class="fragment">&lt;string name="strings array"&gt;
  &lt;items&gt;
    &lt;item&gt;string1&lt;/item&gt;
    &lt;item&gt;string2&lt;/item&gt;
    &lt;item&gt;string3&lt;/item&gt;
    &lt;item&gt;string4&lt;/item&gt;
  &lt;/items&gt;
&lt;/string&gt; 
</pre><p>If you want to use array of <em>&lt;complex&gt;</em> objects use <em>&lt;complex&gt;</em> tag inside <em>item</em> tag.</p>
<dl class="section note"><dt>Note</dt><dd>When use complex array each <em>&lt;complex&gt;</em> object can have own configuration (content). It's also possible to emulate many dimensional arrays using complex array. Inside array name attribute can be omitted. To use short names for tags define SMART_COMPLEX_SHORT_XML_TAGS while building smart library. In this case all the tags and attributes will be named as shortly as possible: string = s, double = d, int = i, uint = ui, name = n, complex = c, message = m, items = is, item = it.</dd></dl>
<p>Let's take a look at the <a class="el" href="echo_example_page.html">echo</a> example configuration file. It uses the unicomm XML format message to store settings.</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8" standalone="no" ?&gt;
&lt;message name="config"&gt;

  &lt;!-- 
	All optional properties has the same default values when 
	unicomm::config is created by default constructor. 
	
	Required means unicomm::load_from_complex_xml will throw if property is absent.
  --&gt;
  
  &lt;!-- optional --&gt;
  &lt;complex name="description"&gt;
    &lt;string name="file"&gt;echo_binary.xml&lt;/string&gt;
    &lt;string name="proto"&gt;Unicomm based echo protocol sample&lt;/string&gt;
  &lt;/complex&gt;

  &lt;!-- required --&gt;
  &lt;complex name="common"&gt;
	  &lt;!-- required, tcp port to be listened to by the unicomm engine --&gt;
    &lt;!-- in case of zero Unix selects the value by it's decision and Windows --&gt;
    &lt;!-- I suppose returns the error --&gt;
    &lt;uint name="tcp_port"&gt;55555&lt;/uint&gt;

	  &lt;!-- optional, default = 0; tcp backlog to be used for incoming connections queue --&gt;
    &lt;!-- 0 manages that system default value is used --&gt;
    &lt;!-- &lt;uint name="tcp_port"&gt;5&lt;/uint&gt; --&gt;
	
    &lt;!-- optional, default = 0 --&gt;
    &lt;int name="timeouts_enabled"&gt;1&lt;/int&gt;
	
    &lt;!-- optional, default = ""; possible values { xml, binary, &lt;custom string&gt; = custom format } --&gt;
    &lt;!-- empty string is also allowed. It means custom format is used, so custom format is default --&gt;
    &lt;string name="message_format"&gt;binary&lt;/string&gt;
  
    &lt;!-- optional, default = "" --&gt;
    &lt;!-- &lt;string name="home_dir"&gt;&lt;/string&gt; --&gt;
	
    &lt;!-- optional, default = infinite_timeout = 0 ms --&gt;
    &lt;!-- &lt;uint name="default_timeout"&gt;0&lt;/uint&gt; --&gt;
	
    &lt;!-- optional, default = undefined_priority = 0 --&gt;
    &lt;!-- &lt;uint name="default_priority"&gt;1&lt;/uint&gt; --&gt;	
	
    &lt;!-- optional, default = 50 ms --&gt;
    &lt;!-- &lt;uint name="dispatcher_idle_tout"&gt;10&lt;/uint&gt; --&gt;
	
    &lt;!-- optional, default = 100 ms --&gt;
    &lt;!-- &lt;uint name="incoming_quantum"&gt;200&lt;/uint&gt; --&gt;
	
    &lt;!-- optional, default = 100 ms --&gt;
    &lt;!-- &lt;uint name="outgoing_quantum"&gt;200&lt;/uint&gt; --&gt;
	
    &lt;!-- optional, default = 0 --&gt;
    &lt;!-- &lt;int name="use_unique_message_id"&gt;0&lt;/int&gt; --&gt;

    &lt;!-- optional, default = 0 --&gt;
    &lt;!-- &lt;int name="use_default_message_priority"&gt;0&lt;/int&gt; --&gt;
  &lt;/complex&gt;

  &lt;!-- optional, if absent every inner property has default value --&gt;
  &lt;complex name="ssl"&gt;
	&lt;!-- optional, default = "" --&gt;
    &lt;string name="client_verify_file"&gt;../../../../echo/ssl/ca.pem&lt;/string&gt;
	
	&lt;!-- optional, default = "" --&gt;
    &lt;string name="server_cert_chain_file"&gt;../../../../echo/ssl/server.pem&lt;/string&gt;
	
	&lt;!-- optional, default = "" --&gt;
    &lt;string name="server_dh_file"&gt;../../../../echo/ssl/dh512.pem&lt;/string&gt;
	
	&lt;!-- optional, default = "" --&gt;
    &lt;string name="server_key_file"&gt;../../../../echo/ssl/server.pem&lt;/string&gt;
	
	&lt;!-- optional, default = "" --&gt;
    &lt;string name="server_key_password"&gt;test&lt;/string&gt;
  &lt;/complex&gt;

  &lt;!-- required, but could be empty - pointless --&gt;
  &lt;complex name="messages"&gt;
    &lt;items&gt;
	
	  &lt;!-- echo_request message, there are all possible properties listed only for example here --&gt;
      &lt;item&gt;
        &lt;complex&gt;
		  &lt;!-- required --&gt;
		  
		  &lt;!-- 
			When binary format is specified (see above) message name is enabled to 
			contain hexadecimal literals. Each one is assumed to be a C++ char value within
			the range [0 - 255]. This also relates to answers property. 
			
			For example string "\xff\x0d" will be converted to a string containing 
			two characters with codes 255 and 13 respectively.
			
			If out of range value specified the std::out_of_range exception is thrown.
      std::runtime_error is thrown if the given string format is wrong.
		  --&gt;
          &lt;string name="message_name"&gt;\x0&lt;/string&gt;
		  
		  &lt;!-- optional, default = default_priority (see above) --&gt;
      &lt;!-- &lt;uint name="priority"&gt;0&lt;/uint&gt; --&gt;
		  
  		&lt;!-- optional, default = 0 --&gt;
		  &lt;!-- note: it's possible to define reply to reply --&gt;
		  &lt;!-- messages can be organized into a arbitrary long chain.  --&gt;
		  &lt;!-- this only depends on logic you need to implement.  --&gt;
		  &lt;!-- just correcly define those rules and unicomm will care about it.  --&gt;
          &lt;int name="need_reply"&gt;1&lt;/int&gt;
		  
	      &lt;!-- optional, default = default_timeout (see above), measured in milliseconds --&gt;
          &lt;uint name="timeout"&gt;1000&lt;/uint&gt;
		  
  		  &lt;!-- optional, default = empty array (empty array here means any response is allowed) --&gt;
          &lt;string name="answers"&gt;
            &lt;items&gt;
              &lt;item&gt;\x1&lt;/item&gt;
            &lt;/items&gt;
          &lt;/string&gt;
        &lt;/complex&gt;
      &lt;/item&gt;

  	  &lt;!-- echo_reply message  --&gt;
      &lt;item&gt;
        &lt;complex&gt;
		  &lt;!-- required --&gt;
          &lt;string name="message_name"&gt;\x1&lt;/string&gt;
        &lt;/complex&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/complex&gt;

&lt;/message&gt;
</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Jun 1 2013 01:38:55 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>

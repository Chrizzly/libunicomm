<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('installation_page.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul style="list-style-type:none;">
<li>
<a class="el" href="installation_page.html#dir_content_section">Package content</a> </li>
<li>
<a class="el" href="installation_page.html#install_section">Install</a> <ul style="list-style-type:none;">
<li>
<a class="el" href="installation_page.html#building_unicomm_msvc_subsection">Building unicomm by using Visual Studio IDE</a> </li>
<li>
<a class="el" href="installation_page.html#building_unicomm_boost_build_subsection">Building unicomm by using Boost.Build</a> </li>
<li>
<a class="el" href="installation_page.html#dep_setup_section">Dependencies setup</a> </li>
<li>
<a class="el" href="installation_page.html#install_options_section">Command line options</a> </li>
<li>
<a class="el" href="installation_page.html#http_install">Http sample</a> </li>
<li>
<a class="el" href="installation_page.html#something_goes_wrong_subsection">If something goes wrong</a> </li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="dir_content_section"></a>
Package content</h1>
<pre style="border: 1px dashed #C4CFE5; padding: 0.5pc 0.5pc 0.5pc 0.5pc; margin-left: 2em; margin-right: 2em;">
    <b>unicomm/</b>..........................<em>Package root directory</em>
        <b>build/</b>...............<em>Unicomm build auxiliary scripts</em>
        <b>doc/</b>.........................................<em>Manuals</em>
        <b>ide/</b>...............................<em>IDE project files</em>
        <b>include/</b>.................<em>Unicomm public header files</em>
        <b>lib/</b>......................<em>Libraries output directory</em>
        <b>out/</b>.....................<em>Samples out and build stuff</em>
            <b>samples/</b>................<em>Samples output directory</em>
            <b>stuff/</b>..............<em>Intermediate files directory</em>
        <b>samples/</b>........................<em>Samples source files</em>
        <b>third_party/</b>...................<em>Implementation detail</em>
        <b>src/</b>............................<em>Unicomm source files</em>
</pre><h1><a class="anchor" id="install_section"></a>
Install</h1>
<p>Unpack downloaded package.</p>
<p>In basic and common use case <a href="http://libunicomm.org">unicomm</a> only depends on <a href="http://www.boost.org/" target="_blank">boost</a> libraries. To successfully build unicomm it's necessary to designate it's location. Note that unicomm is not compatible with versions of boost less than 1.53.</p>
<h2><a class="anchor" id="building_unicomm_msvc_subsection"></a>
Building unicomm by using Visual Studio IDE</h2>
<dl class="section user"><dt>Basic build</dt><dd>Under Visual Studio IDE (2005, 2008) go to <em>Tools-&gt;Options-&gt;Projects and Solutions</em> select <em>VC++ Directories</em> item and setup <a href="http://www.boost.org/" target="_blank">boost</a> libararies location. In Visual Studio 2010 open <em>View-&gt;Property Manager</em>, then doubleclick the property sheet, add boost if it's not in the list yet. Or add path to <em>IncludePath</em> and <em>LibraryPath</em> environment variables. Build desired configuration or use batch build.</dd></dl>
<dl class="section user"><dt>SSL and built-in XML support</dt><dd>To use SSL or built-in XML support you should also provide location for <a href="http://www.openssl.org/" target="_blank">openssl</a> and <a href="http://xerces.apache.org/xerces-c/install-2.html" target="_blank">xercesc</a> libraries.</dd></dl>
<h2><a class="anchor" id="building_unicomm_boost_build_subsection"></a>
Building unicomm by using Boost.Build</h2>
<p>It's necessary to download <a href="http://www.boost.org/boost-build2/" target="_blank">Boost.Build</a> and install it. Unpack the boost build package and build bjam executable under your platform. Go to <em>boost-build/engine/src</em> and start <em>build.sh/bat</em> file. Don't forget to make bjam binary to be on the search <em>PATH</em>. One of the ways to designate Boost.Build location is to setup the <em>BOOST_BUILD_PATH</em> environment variable to the root of your Boost.Build copy. <b>Note</b> the path must not contain trailing backslash or slash (on Windows) instead bjam will fail to load Boost.Build. To find out more details, please see Boost.Build's <a href="http://www.boost.org/boost-build2/" target="_blank">home page</a>.</p>
<p>If you are not using a Boost.Build package, but rather the version bundled with the Boost C++ Libraries, anyway you should designate location of bjam and Boost.Build scripts as described above. Usually it's located in <em>BOOST_ROOT/tools/build/v2</em> subdirectory.</p>
<p>After Boost.Build is setup, it's necessary to designate dependencies location. You may either use environment variables or go to <em>unicomm/build/deps</em> directory of your copy of sources and edit appropriate files.</p>
<h2><a class="anchor" id="dep_setup_section"></a>
Dependencies setup</h2>
<dl class="section user"><dt>Boost setup [ REQUIRED ]</dt><dd>If you are intended to use boost source tree directory define <em>BOOST_ROOT</em> variable or if you want to use pre-built variant of boost define <em>BOOST_INCLUDE_PATH</em> in couple with <em>BOOST_LIBRARY_PATH</em> variables. <em>BOOST_ROOT</em> should point to the directory where the <em>Jamroot</em> file locates.</dd></dl>
<dl class="section user"><dt>OpenSSL setup [ OPTIONAL ]</dt><dd>If you are intended to use SSL on Windows it's also necessary to define <em>OPENSSL_ROOT</em> variable. On Linux platform openssl is known library, there are no defines required. But anyway to successfully build unicomm, openssl should be installed on the system. Try <em>apt-get install libssl-dev</em> on Ubuntu for instance.</dd></dl>
<dl class="section user"><dt>Xerces-C based XML Engine setup [ OPTIONAL ]</dt><dd>To use built-in XML engine you should also define <em>XERCESC_ROOT</em>, download and install <a href="http://xerces.apache.org/xerces-c/install-2.html" target="_blank">Apache Xerces-C 2.8</a> library.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>For OpenSSL and Xerces-C it's supposed libraries located in <em>LIBRARY_ROOT/lib</em> and headers can be found in <em>LIBRARY_ROOT/include</em>.</dd></dl>
<dl class="section user"><dt>Variables default values</dt><dd></dd></dl>
<p>Those values assigned to the variables if they undefined.</p>
<pre style="border: 1px dashed #C4CFE5; padding: 0.5pc 0.5pc 0.5pc 0.5pc; margin-left: 2em; margin-right: 2em;">
<b></b>                     Linux                          Windows
<b>BOOST_INCLUDE_PATH = </b><em>/usr/local/include/boost-1_53  c:\boost\include\boost-1_53</em>
<b>BOOST_LIBRARY_PATH = </b><em>/usr/local/lib                 c:\boost\lib</em>
</pre><p>Other variables have empty string values.</p>
<h2><a class="anchor" id="install_options_section"></a>
Command line options</h2>
<p>To build unicomm and samples use <em><b>build.sh/cmd</b>.</em> If executed without parameters builds <em>release</em> variant in <em>static</em> and <em>shared</em> configurations. <em>build.sh/cmd</em> accepts any parameters accepted by bjam, but there are some extra parameters exist. To build all possible variants and configurations use <em><b>build-complete.sh/cmd</b>,</em> please.</p>
<p>Execute <em>./build.sh &ndash;help</em> on Linux or <em>.\build.cmd &ndash;help</em> on Windows to see the options description. You may see the options description is in the table below.</p>
<p>Defaults for the options are specified in brackets if there are.</p>
<table  border="0" cellspacing="3" cellpadding="3" width="100%">
<tr>
<th colspan="2" align="left">Usage   </th></tr>
<tr>
<td colspan="2">./build.sh [options] [properties] [targets] on Unix, Linux etc.<br/>
 .\build.cmd [options] [properties] [targets] on Windows </td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<th colspan="2" align="left" style="font-weight: bold"><p class="starttd"><b>Options</b>  </p>
<p class="endtd"></p>
</th></tr>
<tr>
<td width="25%">-h, &ndash;help  </td><td><p class="starttd">Display this help and exit  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>&ndash;prefix=&lt;PREFIX&gt;  </td><td><p class="starttd">Install unicomm files here. By default is not used. To force the installation to the prefix location specify the option or target <em>unicomm-install</em> (see below) explicitly. Binaries are installed into <em>&lt;PREFIX&gt;/lib</em> and headers into <em>&lt;PREFIX&gt;/include/unicomm</em>, i.e. if <em>&ndash;prefix=/usr/local</em> the libraries will be copied into <em>/usr/local/lib</em> and headers will appear in <em>/usr/local/include/unicomm</em>. If <em>unicomm-install</em> target and <em>&ndash;prefix</em> option is absent binaries installed into <em>unicomm/lib</em> subdirectory. <br/>
 [/usr/local] on Linux. [c:\unicomm] on Windows.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="anchor" id="use_pre_built_boost"></a> &ndash;use-pre-built-boost=&lt;BOOST_VER&gt;  </td><td><p class="starttd">Designates to use pre-built boost libraries instead of using boost source tree. You should define either <em>BOOST_ROOT</em> or <em>BOOST_INCLUDE_PATH</em> in couple with <em>BOOST_LIBRARY_PATH</em> variables depending on the option presence. To make the boost build to find pebuilt libraries it's necessary to specify exact version of boost e.g. <em>.\build.cmd &ndash;use-pre-built-boost=1.53</em> will use 1.53 to resolve the names.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>&ndash;clean  </td><td><p class="starttd">Cleans the given configuration. This will remove unicomm related targets within the configuration specified. The targets declared by dependencies (e.g. boost) are not affected. For instance <em>.\build.cmd &ndash;clean</em> removes all the destination files regarding to <em>variant=release</em> and <em>link=static,shared</em> i.e. removes the default configuration's main targets.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>&ndash;clean-all  </td><td><p class="starttd">Cleans the given configuration and all it's dependencies. This will remove unicomm related targets within the configuration specified and all the dependencies are built unlike <em>&ndash;clean</em> which removes only the unicomm related targets. <b>Note:</b> The <em>&ndash;prefix=/path/to/prebuilt/unicomm</em> location will also be cleared if the <em>&ndash;prefix</em> option is specified.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>&ndash;win-ver=&lt;WIN_VER&gt;  </td><td><p class="starttd">Used to specify Windows system version explicitly. <br/>
 [0x501] - Windows XP.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>&ndash;use-complex-xml  </td><td><p class="starttd">Makes the XML engine to be available. An alternate way to designate to use XML is to specify <em>define=<a class="el" href="preprocessor_defines_page.html#UNICOMM_USE_COMPLEX_XML">UNICOMM_USE_COMPLEX_XML</a></em> parameter in command line.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<th colspan="2" align="left" style="font-weight: bold"><p class="starttd"><b>Properties</b>  </p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>toolset=&lt;TOOLSET&gt;  </td><td><p class="starttd">Indicates the toolset to build with. At present msvc and gcc are only guaranteed to be work. If the toolset is not specified the Boost.Build will use default regarding to current environment. In most cases it can be omitted but sometimes when you have several versions of the compiler you may want to designate exact one by using e.g. that syntax <em>toolset=msvc-8.0</em>. Can be msvc|gcc. <br/>
 [automatically detected]  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>define=&lt;MACRO&gt;  </td><td><p class="starttd">Define the specified macro. Please, see <a class="el" href="preprocessor_defines_page.html">preprocessor definitions</a> for macroses being used by unicomm.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>variant=&lt;VARIANT&gt;  </td><td><p class="starttd">Select one or more the build variants. debug|release|debug-ssl|release-ssl are possible.<br/>
 [release]  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>link=&lt;LINK&gt;  </td><td><p class="starttd">Whether to build static or shared libraries. Allowed values static|shared.<br/>
 [static,shared]  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<th colspan="2" align="left" style="font-weight: bold"><p class="starttd"><b>Targets</b>  </p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>unicomm-install  </td><td><p class="starttd">Installs unicomm to the prefix location.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>term-install  </td><td><p class="starttd">Build and install term sample.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>http-install  </td><td><p class="starttd">Build and install http sample.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>echo-install  </td><td><p class="starttd">Build and install echo sample.  </p>
<p class="endtd"></p>
</td></tr>
</table>
<p>More properties and options can be found in Boost.Build documentation. Please, check Boost.Build <a href="http://www.boost.org/boost-build2/" target="_blank">home</a> for details. Below there are some examples of command line provided.</p>
<p><em>./build.sh toolset=gcc variant=debug,release,debug-ssl,release-ssl link=shared</em><br/>
 <em>./build.sh debug toolset=gcc link=shared define=<a class="el" href="preprocessor_defines_page.html#UNICOMM_USE_COMPLEX_XML">UNICOMM_USE_COMPLEX_XML</a> define=<a class="el" href="preprocessor_defines_page.html#UNICOMM_DEBUG_VERBOSE">UNICOMM_DEBUG_VERBOSE</a></em><br/>
</p>
<p>Sometimes you may want to pass extra parameters to the compiler to e.g. disable warnings that may appear due to different compiler or dependency version. Use <em>cxxflags</em> parameter to accomplish the desired.</p>
<p><em>./build.sh toolset=gcc link=shared,static variant=debug,debug-ssl,release,release-ssl cxxflags="-Wno-strict-aliasing -Wno-unused-result -Wno-unused-variable"</em><br/>
</p>
<p>Under Windows the following line will build unicomm <em>shared</em> and <em>static</em> in <em>debug</em> and <em>release</em> configuration using msvc 8.0.</p>
<p><em>.\build.cmd variant=debug,release link=shared,static toolset=msvc-8.0</em><br/>
</p>
<p>To build samples use the following commands.</p>
<p><em>./build.sh term-install variant=debug-ssl,release-ssl link=shared toolset=gcc</em><br/>
 <em>./build.sh http-install variant=debug,release link=static toolset=gcc</em><br/>
 <em>.\build.cmd http-install echo-install variant=debug,release link=static toolset=msvc-10.0</em><br/>
</p>
<p>To build all the configurations use <em>./build-complete.sh/cmd</em>. It builds <em>debug</em>, <em>debug-ssl</em>, <em>release</em>, <em>release-ssl</em> variants within <em>static</em> and <em>shared</em> configurations. If everything is setup properly you should see the build process output. Boost build will build all the necessary dependencies and link it.</p>
<h2><a class="anchor" id="http_install"></a>
Http sample</h2>
<p>To build the http sample just execute the following line.</p>
<p><em>./build.sh http-install</em></p>
<p>After the build is completed start the http server, open your browser and type <em>http(s)://localhost</em>. Map bora-bora name to 127.0.0.1 by putting it into <em>hosts</em> file and type <em>http(s)://bora-bora</em>.</p>
<dl class="section note"><dt>Note</dt><dd>Samples installed to the <em>unicomm/out/samples/boost-build</em> subdirectory.<br/>
 All the specified parameters are just passed to bjam engine as is. So, you are enabled to designate any configuration you need. Please, examine Boost.Build's <a href="http://www.boost.org/boost-build2/" target="_blank">home page</a> for details.</dd></dl>
<h2><a class="anchor" id="something_goes_wrong_subsection"></a>
If something goes wrong</h2>
<p>If you get errors while building and installing unicomm or it's part try <em>&ndash;debug-configuration</em> and <em>&ndash;debug-building</em> options to get extra information on the process. Write <a href="https://groups.google.com/forum/?hl=ru&amp;fromgroups#!forum/libunicomm" target="_blank">here</a> or send me a message <a href="#" onclick="location.href='mai'+'lto:'+'you'+'.a'+'re.'+'we'+'lco'+'me'+'@li'+'bu'+'nic'+'om'+'m.o'+'rg'; return false;">you.are.welcome@libunicomm.org</a> if you think you found a bug.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="preprocessor_defines_page.html">Preprocessor definitions</a>. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Jun 1 2013 01:38:54 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
